import{p as T,a as V,_ as j,b as L,c as D}from"./content-3263433b.js";import{d as H,n as P,a4 as S,o as n,c as f,V as o,a8 as F,a2 as a,F as I,a5 as E,a3 as k,_,a as u,e as r,M as p,Q as i,O as l}from"./@vue-7e1ab0af.js";import{u as Q}from"./vuex-f1ee712f.js";import{u as R}from"./vue-router-edf90322.js";import{c as A}from"./formatTime-4210fcd1.js";import{j as G,l as J,m as K}from"./@vicons-b98681e0.js";import{o as U,M as W,j as X,a as Y,L as Z}from"./naive-ui-df120204.js";const ee={class:"nickname-wrap"},te={class:"username-wrap"},se={class:"item-header-extra"},ae={class:"timestamp"},ne=["innerHTML"],oe={class:"opt-item"},ie={class:"opt-item"},de=H({__name:"post-item",props:{post:{}},setup(x){const C=x,d=R(),z=Q(),e=P(()=>{let s=Object.assign({texts:[],imgs:[],videos:[],links:[],attachments:[],charge_attachments:[]},C.post);return s.contents.map(t=>{(+t.type==1||+t.type==2)&&s.texts.push(t),+t.type==3&&s.imgs.push(t),+t.type==4&&s.videos.push(t),+t.type==6&&s.links.push(t),+t.type==7&&s.attachments.push(t),+t.type==8&&s.charge_attachments.push(t)}),s}),v=s=>{d.push({name:"post",query:{id:s}})},$=(s,t)=>{if(s.target.dataset.detail){const c=s.target.dataset.detail.split(":");if(c.length===2){z.commit("refresh"),c[0]==="tag"?d.push({name:"home",query:{q:c[1],t:"tag"}}):d.push({name:"user",query:{s:c[1]}});return}}v(t)};return(s,t)=>{const c=U,b=S("router-link"),h=W,y=V,w=j,q=L,B=D,g=X,M=Y,N=Z;return n(),f("div",{class:"post-item",onClick:t[3]||(t[3]=m=>v(e.value.id))},[o(N,{"content-indented":""},F({avatar:a(()=>[o(c,{round:"",size:30,src:e.value.user.avatar},null,8,["src"])]),header:a(()=>[u("span",ee,[o(b,{onClick:t[0]||(t[0]=k(()=>{},["stop"])),class:"username-link",to:{name:"user",query:{s:e.value.user.username}}},{default:a(()=>[r(p(e.value.user.nickname),1)]),_:1},8,["to"])]),u("span",te," @"+p(e.value.user.username),1),e.value.is_top?(n(),i(h,{key:0,class:"top-tag",type:"warning",size:"small",round:""},{default:a(()=>[r(" 置顶 ")]),_:1})):l("",!0),e.value.visibility==1?(n(),i(h,{key:1,class:"top-tag",type:"error",size:"small",round:""},{default:a(()=>[r(" 私密 ")]),_:1})):l("",!0),e.value.visibility==2?(n(),i(h,{key:2,class:"top-tag",type:"info",size:"small",round:""},{default:a(()=>[r(" 好友可见 ")]),_:1})):l("",!0)]),"header-extra":a(()=>[u("div",se,[u("span",ae,p(e.value.ip_loc?e.value.ip_loc+" · ":e.value.ip_loc)+" "+p(_(A)(e.value.created_on)),1)])]),footer:a(()=>[e.value.attachments.length>0?(n(),i(y,{key:0,attachments:e.value.attachments},null,8,["attachments"])):l("",!0),e.value.charge_attachments.length>0?(n(),i(y,{key:1,attachments:e.value.charge_attachments,price:e.value.attachment_price},null,8,["attachments","price"])):l("",!0),e.value.imgs.length>0?(n(),i(w,{key:2,imgs:e.value.imgs},null,8,["imgs"])):l("",!0),e.value.videos.length>0?(n(),i(q,{key:3,videos:e.value.videos},null,8,["videos"])):l("",!0),e.value.links.length>0?(n(),i(B,{key:4,links:e.value.links},null,8,["links"])):l("",!0)]),action:a(()=>[o(M,{justify:"space-between"},{default:a(()=>[u("div",oe,[o(g,{size:"18",class:"opt-item-icon"},{default:a(()=>[o(_(G))]),_:1}),r(" "+p(e.value.upvote_count),1)]),u("div",{class:"opt-item",onClick:t[2]||(t[2]=k(m=>v(e.value.id),["stop"]))},[o(g,{size:"18",class:"opt-item-icon"},{default:a(()=>[o(_(J))]),_:1}),r(" "+p(e.value.comment_count),1)]),u("div",ie,[o(g,{size:"18",class:"opt-item-icon"},{default:a(()=>[o(_(K))]),_:1}),r(" "+p(e.value.collection_count),1)])]),_:1})]),_:2},[e.value.texts.length>0?{name:"description",fn:a(()=>[(n(!0),f(I,null,E(e.value.texts,m=>(n(),f("span",{key:m.id,class:"post-text",onClick:t[1]||(t[1]=k(O=>$(O,e.value.id),["stop"])),innerHTML:_(T)(m.content).content},null,8,ne))),128))]),key:"0"}:void 0]),1024)])}}});export{de as _};
